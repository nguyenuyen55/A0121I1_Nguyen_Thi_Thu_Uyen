<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
 


    <p>Mã số</p>
    <input type="text" name="" id="maso" onchange="checkMaSo(this.value)">
    <p>Loại tiết kiệm </p>
    <input type="text" name="" id="loaiTk" onchange="checkLoaitk(this.value)">
    <p>họ và tên khách hàng</p>
    <input type="text" name="" id="name" onchange="checkhovaTen(this.value)">
    <p>chứng minh nhân dân</p>
    <input type="text" name="" id="cmnd" onchange="checkcmnd(this.value)">
    <p>Ngày mở sổ </p>
    <input type="datetime" name="" id="date" onchange="checkngay(this.value)">
    <p>Số tiền gửi</p>
    <input type="text" name="" id="sotien" onchange="checkTien(value)">
    <p> <input type="button" value="thêm" onclick="add()"> </p>
    <div id="kq"></div>
    <script>
        var arr = [];
        class SoTietKiem {
            constructor(maSo, LoaiTk, hoTen, cmnd, ngayMoSo, SoTien) {
                this.maSo = maSo;
                this.LoaiTk = LoaiTk;
                this.hoTen = hoTen;
                this.cmnd = cmnd;
                this.ngayMoSo = ngayMoSo;
                this.SoTien = SoTien;
            }

        }
        function checkMaSo(value) {
            if (value.length > 5) {
                alert("mã sô không dc quá 5");
                document.getElementById("maso").value = "";
            }
        }
        function checkLoaitk(value) {
            if (value.length > 10) {
                alert("chuỗi loại tiết kiệm không dc quá 10");
                document.getElementById("loaiTk").value = "";
            }
        }

        function checkhovaTen(value) {
            if (value.length > 30) {
                alert("chuỗi tên không dc quá 30");
                document.getElementById("name").value = "";
            }

        }
        function checkcmnd(value) {

            if (isNaN(value)) {
                alert("cmnd phải là  số ");
                document.getElementById("cmnd").value = "";
            }

        }
        function checkngay(value) {
            var pattern = /^((0)[1-9]|(1)[0-9]|(2)[0-9]|(3)[0-1])(\/)(((0)[1-9])|((1)[0-2]))(\/)\d{4}$/;
            if (!value.match(pattern)) {
                alert("nhập ngày sai vui lòng nhập lại");
                document.getElementById("date").value = "";
            }

        }
        function checkTien(value) {

            if (isNaN(value)) {
                alert("tiền phải là  số ");
                document.getElementById("sotien").value = "";
            }
        }
        function add() {
            let dem = 0;
            var maso = document.getElementById("maso").value;
            var loaiTK = document.getElementById("loaiTk").value;
            var hovaten = document.getElementById("name").value;
            var cmnd = document.getElementById("cmnd").value;
            var date = document.getElementById("date").value;
            var tien = document.getElementById("sotien").value;
            for (let i = 0; i < arr.length; i++) {
                if (arr[i].maSo == maso) {
                    alert("mã số đã tồn tại");
                    dem++;
                }
            }
            if (dem == 0) {
                arr.push(new SoTietKiem(maso, loaiTK, hovaten, cmnd, date, tien));
                display();
            }
        }
        function display() {
            kq = "<table border='1'><th colspan='6'>Danh sách sổ tiết kiệm</th>";
            for (let index = 0; index < arr.length; index++) {
                kq += "<tr><td>" + arr[index].maSo + "</td" +
                    "<td>" + arr[index].LoaiTk + "</td>" +
                    "<td>" + arr[index].hoTen + "</td>" +
                    "<td>" + arr[index].cmnd + "</td>" +
                    "<td>" + arr[index].ngayMoSo + "</td>" +
                    "<td>" + arr[index].SoTien + "</td><td>" +
                    "<input type='button' value='Xoá' onclick='delete_elements_array(" + index
                    + ")'/></td></tr>";
            }

            kq += "</table>"
            document.getElementById("kq").innerHTML = kq;
        }

        function delete_elements_array(index) {
            var a = confirm("bạn có chắc chắn xoá hay không?");
            if (a == true) {
                arr.splice(index, 1);
                display();
            }

        }

    </script>
</body>

</html>